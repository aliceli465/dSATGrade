<!DOCTYPE html>
<html>
<head>
    <title>DSAT Grading</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/bb1/math.js"></script><script src="js/bb1/mathEasy.js"></script><script src="js/bb1/mathHard.js"></script><script src="js/bb1/rw.js"></script><script src="js/bb1/rwEasy.js"></script><script src="js/bb1/rwHard.js"></script>
    <script src="js/bb2/math.js"></script><script src="js/bb2/mathEasy.js"></script><script src="js/bb2/mathHard.js"></script><script src="js/bb2/rw.js"></script><script src="js/bb2/rwEasy.js"></script><script src="js/bb2/rwHard.js"></script>
    <script src="js/bb3/math.js"></script><script src="js/bb3/mathEasy.js"></script><script src="js/bb3/mathHard.js"></script><script src="js/bb3/rw.js"></script><script src="js/bb3/rwEasy.js"></script><script src="js/bb3/rwHard.js"></script>
    <script src="js/bb4/math.js"></script><script src="js/bb4/mathEasy.js"></script><script src="js/bb4/mathHard.js"></script><script src="js/bb4/rw.js"></script><script src="js/bb4/rwEasy.js"></script><script src="js/bb4/rwHard.js"></script>
    <script src="stuff/jquery/dist/jquery.min.js"></script>
    <script src="stuff/mustache/mustache.min.js"></script>
    <script src="js/helpers.js"></script>
</head>
<body>
    <form id="gradeForm">
        <div style="display:flex;">
            <div style="padding-right: 100px;"> 
                <h3>Paste your student answers here:</h1>
                <textarea type="text" id="answers" name="textValue" style="width: 300px; height:600px;"></textarea>
            </div>
            <div style="margin-top:50px;"> 
                <label for="testNumber">Select test</label>
                <br>
                <select id="testNumber" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="1">Bluebook Test 1</option>
                    <option value="2">Bluebook Test 2</option>
                    <option value="3">Bluebook Test 3</option>
                    <option value="4">Bluebook Test 4</option>
                </select>
                <br><br>
                <label for="rwEH">Select easy/hard for RW module 2</label>
                <br>
                <select id="rwEH" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Easy">Easy</option>
                    <option value="Hard">Hard</option>
                </select>
                <br><br>
                <label for="mathEH">Select easy/hard for math module 2</label>
                <br>
                <select id="mathEH" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Easy">Easy</option>
                    <option value="Hard">Hard</option>
                </select>
                <br><br>
                <input type="submit" value="Grade!" class="cute-button">
            </div>
        </div>


    </form>
    <script>
       function submitForm(event) {
            event.preventDefault(); // Prevents the default form submission behavior
            gradeTest();
            loadResults();
            // console.log("reading with answers");
            // console.log(JSON.parse(localStorage.getItem('rw1')));
            // console.log("reading2");
            // console.log(JSON.parse(localStorage.getItem('rw2')));
            // console.log("math");
            // console.log(JSON.parse(localStorage.getItem('math1')));
            // console.log("math 2");
            // console.log(JSON.parse(localStorage.getItem('math2')));
        }
        document.getElementById('gradeForm').addEventListener('submit', submitForm);
    </script>
    <script type="text/x-mustache" id="rwResult">
        {{#questions}}
            {{^isCorrect}}
                <figure style="display: inline-block; margin-left: 100px;">
                    <figcaption><span style="background-color:rgb(240, 103, 121)">{{question}})</span></figcaption>
                    {{#images}}
                        <img src="{{.}}" class="rw-crop">
                    {{/images}}
                    {{#selected-answer}}
                        <p>You put {{selected-answer}}</p>
                    {{/selected-answer}}
                    {{^selected-answer}}
                        <p>You left this empty</p>
                    {{/selected-answer}}
                </figure>
            {{/isCorrect}}
        {{/questions}}
    </script>
    <script type="text/x-mustache" id="mathResult">
        {{#questions}}
            {{^isCorrect}}
                <figure style="display: inline-block; margin-left: 50px;">
                    <figcaption style="padding-bottom: 50px;"><span style="background-color:rgb(240, 103, 121)">{{question}})</span></figcaption>
                    {{#images}}
                        {{#isMcq}}
                            <img src="{{.}}" class="math-crop">
                        {{/isMcq}}
                        {{^isMcq}}
                            <img src="{{.}}" class="math-crop-frq">
                        {{/isMcq}}
                    {{/images}}
                    {{#selected-answer}}
                        <p>You put {{selected-answer}}</p>
                    {{/selected-answer}}
                    {{^selected-answer}}
                        <p>You left this empty</p>
                    {{/selected-answer}}
                </figure>
            {{/isCorrect}}
        {{/questions}}
    </script>
    <!--results-->
    <div id="results" style="display:none;">
        <h1>Results</h1>
        <h3>Press ctrl + p to export this page as a PDF and to use during the lesson!</h3>
        <p>*IMPORTANT* Once you're done and YOU HAVE YOUR PDF SAVED, click this button to clear your session data!</p>
        <button style="width:100px; height:50px;"onclick="clearStorage()">Clear session</button>
        <script>
            function clearStorage() {
                localStorage.clear();
                console.log("local storage cleared!");
                window.location.href = "yay.html";
            }
        </script>
        <h2>Jump to section:</h2>
        <ul>
            <li><a href="#rw_results">Reading/Writing 1</a></li>
            <li><a href="#rw2_results">Reading/Writing 2</a></li>
            <li><a href="#math_results">Math 1</a></li>
            <li><a href="#math2_results">Math 2</a></li>
        </ul>
        <div id="rw_results">
            <h3>R/W Module 1</h3>
        </div>
        <div id="rw2_results">
            <h3>R/W Module 2</h3>
        </div>
        <div id="math_results">
            <h3>Math Module 1</h3>
        </div>
        <div id="math2_results">
            <h3>Math Module 2</h3>
        </div>
    </div>

</body>
</html>