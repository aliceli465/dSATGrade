<!DOCTYPE html>
<html>
<head>
    <title>DSAT Grading</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/helpers.js"></script>
    <script src="js/bb1/math.js"></script><script src="js/bb1/mathEasy.js"></script><script src="js/bb1/mathHard.js"></script><script src="js/bb1/rw.js"></script><script src="js/bb1/rwEasy.js"></script><script src="js/bb1/rwHard.js"></script>
    <script src="js/bb2/math.js"></script><script src="js/bb2/mathEasy.js"></script><script src="js/bb2/mathHard.js"></script><script src="js/bb2/rw.js"></script><script src="js/bb2/rwEasy.js"></script><script src="js/bb2/rwHard.js"></script>
    <script src="js/bb3/math.js"></script><script src="js/bb3/mathEasy.js"></script><script src="js/bb3/mathHard.js"></script><script src="js/bb3/rw.js"></script><script src="js/bb3/rwEasy.js"></script><script src="js/bb3/rwHard.js"></script>
    <script src="js/bb4/math.js"></script><script src="js/bb4/mathEasy.js"></script><script src="js/bb4/mathHard.js"></script><script src="js/bb4/rw.js"></script><script src="js/bb4/rwEasy.js"></script><script src="js/bb4/rwHard.js"></script>
    <script src="stuff/jquery/dist/jquery.min.js"></script>
    <script src="stuff/mustache/mustache.min.js"></script>
</head>
<body>
    <button onclick="clearStorage()"></button>
    <script>
        function clearStorage() {
            localStorage.clear();
            console.log("local storage cleared!");
        }
    </script>
    <form id="gradeForm">
        <div style="display:flex;">
            <div style="padding-right: 100px;"> 
                <h3>Paste your student answers here:</h1>
                <textarea type="text" id="answers" name="textValue" style="width: 300px; height:600px;"></textarea>
            </div>
            <div style="margin-top:50px;"> 
                <label for="testNumber">Select test</label>
                <br>
                <select id="testNumber" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="1">Bluebook Test 1</option>
                    <option value="2">Bluebook Test 2</option>
                    <option value="3">Bluebook Test 3</option>
                    <option value="4">Bluebook Test 4</option>
                </select>
                <br><br>
                <label for="rwEH">Select easy/hard for RW module 2</label>
                <br>
                <select id="rwEH" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Easy">Easy</option>
                    <option value="Hard">Hard</option>
                </select>
                <br><br>
                <label for="mathEH">Select easy/hard for math module 2</label>
                <br>
                <select id="mathEH" required>
                    <option value="" selected disabled>Select an option</option>
                    <option value="Easy">Easy</option>
                    <option value="Hard">Hard</option>
                </select>
                <br><br>
                <input type="submit" value="Grade!" class="cute-button">
            </div>
        </div>


    </form>
    <!--when the form submits, 
    1) record the test
    2) variable for easy/hard for reading
    3) variable for easy/hard for math
    4) render each of the mustache templates and set previous html to display: none

    templates: 
         - whole test
         - incorrect/omitted only without answers
         - incorrect/omitted with answers
    
    option 1: keep all the question JSON file from before. This way we can keep a counter for each question
        compare each column individually. have gradeRW(), gradeRW2(), gradeMath(), gradeMath2(). 
        For each function:
            - go through each column. set the selected-answer in JSON. If not === for RW or in [] for math, 
        For each question missed, increase its missed in mongoDB by one
        Have a local storage array that maybe records each of the student specific ones missed. add event listener
        so localstorage is cleared when user exits:
            window.addEventListener('beforeunload', function() {
                // Clear the localStorage
                localStorage.clear();
            });
        
        in summary: keep each questions thing as a window.JSON object for global usage
        have a nav bar at the top so we can see live stats of the most missed questions etc. etc.
        this would be data vis

        we could keep two arrays: questions[], studentAnswers[]
        change the mustache script to render the correct images given question number and correct path based on test and easy/hard section
    -->
    <script>
       function submitForm(event) {
            event.preventDefault(); // Prevents the default form submission behavior
            gradeTest();
        }
        document.getElementById('gradeForm').addEventListener('submit', submitForm);
        window.addEventListener('beforeunload', function() {
                // Clear the localStorage
                localStorage.clear();
        });
    </script>

    <!--results-->

    <div id="results" style="display:none;">
        <h1>Results</h1>
        <h3>Press ctrl + p to export this page as a PDF and to use during the lesson!</h3>
    </div>
</body>
</html>